CREATE OR REPLACE PROCEDURE maxpay_professor
	(p_college department.dname%TYPE)
IS
	v_max NUMBER;
	v_part department.deptno%TYPE;

	CURSOR c1 IS
	SELECT name, position, (pay+NVL(bonus,0)) pay, dname
	FROM professor NATURAL JOIN (SELECT d1.deptno, d1.dname
 			FROM department d1 JOIN department d2 ON(d1.part = d2.deptno)
			WHERE  d2.part = v_part);
BEGIN
	SELECT deptno  INTO v_part
	FROM department
	WHERE dname = p_college;

	FOR p1 IN c1
	LOOP
		SELECT MAX(pay+NVL(bonus,0)) INTO v_max
		FROM professor NATURAL JOIN (SELECT d1.deptno, d1.dname, d1.part
 				FROM department d1 JOIN department d2 ON(d1.part = d2.deptno)
				WHERE  d2.part = v_part)
 		WHERE position = p1.position;

	IF(v_max=p1.pay ) THEN
	     v_max := v_max * 10000;
	     DBMS_OUTPUT.PUT_LINE(p1.name||'  '||p1.position||'  '||p1.dname||'  '|| v_max);
	END IF;
	END LOOP;

END;
/
exec maxpay_professor('공과대학')